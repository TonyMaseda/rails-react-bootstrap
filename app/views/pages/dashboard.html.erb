<% if current_user.has_role?(:superadmin) %>

  <section class="jumbotron text-center">
    <div class="container">
      <h1 class="jumbotron-heading">Dashboard</h1>
      <p class="lead text-left text-muted">Hi, <%= link_to truncate(current_user.name), current_user, class: "text-info font-weight-bold" %>, this site contains a blog &plus; todo list, as well as video chat. This dashboard provides an admin view.</p>
      <div class="filter">
        <%= render partial: 'pages/search', locals: { action: root_path, q: '' } %>
      </div><!-- .filter -->
    </div><!-- .container -->
  </section><!-- .jumbotron -->
  <section class="mt-0 mb-5 pb-5 text-center">
    <div class="row">
      <div class="col-lg-7">
        <div class="row mb-3">
          <div class="col-12 mt-3 text-left">
            <%= render partial: 'users/users' %>
          </div><!-- .col-12 -->
          <%= render partial: 'pages/pies' %>
        </div><!-- .row .mb-5 -->
      </div><!-- .col-lg-7 -->
      <div class="col-lg-1 pb-1"></div>
      <div class="col-lg-4">
        <%= render partial: 'pages/columns' %>
      </div><!-- .col-lg-4 -->
    </div><!-- .row -->
    <div class="row">
      <div class="col-lg-3">
        <div class="pt-0 mt-1 mb-5">
          <%= pie_chart api_v1_charts_user_timezones_path, refresh: 1200, legend: false, download: {background: "#ffffff"}, title: "Timezones" %>
        </div><!-- .pt-0 mt-1 mb-4 -->
      </div><!-- .col-lg-3 -->
      <div class="col-lg-3">
        <div class="pt-0 mt-1 mb-5">
          <%= pie_chart Ahoy::Visit.group(:country).count, refresh: 1200, legend: false, download: {background: "#ffffff"}, title: "Country" %>
        </div><!-- .pt-0 mt-1 mb-4 -->
      </div><!-- .col-lg-3 -->
      <div class="col-lg-3">
        <div class="pt-0 mt-1 mb-5">
          <%= pie_chart Ahoy::Visit.group(:region).count, refresh: 1200, legend: false, download: {background: "#ffffff"}, title: "Region" %>
        </div><!-- .pt-0 mt-1 mb-4 -->
      </div><!-- .col-lg-3 -->
      <div class="col-lg-3">
        <div class="pt-0 mt-1 mb-5">
          <%= pie_chart Ahoy::Visit.group(:city).count, refresh: 1200, legend: false, download: {background: "#ffffff"}, title: "City" %>
        </div><!-- .pt-0 mt-1 mb-4 -->
      </div><!-- .col-lg-3 -->
      <div class="col-lg-6 mt-1 mb-4">
        <%= area_chart Ahoy::Visit.group_by_day(:started_at).count, download: {background: "#ffffff"}, points: false, colors: ["rgba(0,0,0,0.7)"], title: "Visits" %>
      </div><!-- .col-lg-4 -->
      <div class="col-lg-6 mt-1 mb-4">
        <%= area_chart Ahoy::Event.group_by_day(:time).count, download: {background: "#ffffff"}, points: false, colors: ["rgba(0,0,0,0.3)"], title: "Visit Events" %>
      </div><!-- .col-lg-4 -->
      <div class="col-lg-4 mt-1 mb-4">
        <%= area_chart UsersArticle.group_by_day(:created_at).count, download: {background: "#ffffff"}, points: false, colors: ["rgba(251,79,20,0.5)"], title: "Article Likes" %>
      </div><!-- .col-lg-4 -->
      <div class="col-lg-4 mt-1 mb-4">
        <%= area_chart Ahoy::Event.where_event("Viewed Welcome").group_by_day(:time).count, download: {background: "#ffffff"}, points: false, colors: ["rgba(0,0,0,0.5)"], title: "Welcome Index" %>
      </div><!-- .col-lg-4 -->
      <div class="col-lg-4 mt-1 mb-4">
        <%= area_chart Ahoy::Event.where_event("Viewed Dashboard").group_by_day(:time).count, download: {background: "#ffffff"}, points: false, colors: ["rgba(0,0,0,0.5)"], title: "Dashboard Index" %>
      </div><!-- .col-lg-4 -->
      <div class="col-lg-4 mt-1 mb-4">
        <%= area_chart Ahoy::Event.where_event("Viewed Blog").group_by_day(:time).count, download: {background: "#ffffff"}, points: false, colors: ["rgba(251,79,20,0.7)"], title: "Blog" %>
      </div><!-- .col-lg-4 -->
      <div class="col-lg-4 mt-1 mb-4">
        <%= area_chart Ahoy::Event.where_event("Viewed Rooms").group_by_day(:time).count, download: {background: "#ffffff"}, points: false, colors: ["rgba(230,67,140,0.7)"], title: "Chat Rooms" %>
      </div><!-- .col-lg-4 -->
      <div class="col-lg-4 mt-1 mb-4">
        <%= area_chart Ahoy::Event.where_event("Viewed ToDo List").group_by_day(:time).count, download: {background: "#ffffff"}, points: false, colors: ["rgba(61,12,2,0.7)"], title: "ToDo List" %>
      </div><!-- .col-lg-4 -->
      <div class="col-lg-4 mt-1 mb-4">
        <%= area_chart Ahoy::Event.where('name LIKE ?', "%Viewed Article: %").group_by_day(:time).count, download: {background: "#ffffff"}, points: false, colors: ["rgba(251,79,20,0.3)"], title: "Article" %>
      </div><!-- .col-lg-4 -->
      <div class="col-lg-4 mt-1 mb-4">
        <%= area_chart Ahoy::Event.where('name LIKE ?', "%Viewed Room: %").group_by_day(:time).count, download: {background: "#ffffff"}, points: false, colors: ["rgba(230,67,140,0.3)"], title: "Room" %>
      </div><!-- .col-lg-4 -->
      <div class="col-lg-4 mt-1 mb-4">
        <%= area_chart Ahoy::Event.where('name LIKE ?', "%Viewed User: %").group_by_day(:time).count, download: {background: "#ffffff"}, points: false, colors: ["rgba(0,0,0,0.5)"], title: "User" %>
      </div><!-- .col-lg-4 -->
      <div class="col-lg-3 mt-1 mb-4">
        <%= area_chart Ahoy::Event.where_event("Viewed Terms and Conditions").group_by_day(:time).count, download: {background: "#ffffff"}, points: false, colors: ["rgba(255,0,0,0.5)"], title: "Terms and Conditions" %>
      </div><!-- .col-lg-3 -->
      <div class="col-lg-3 mt-1 mb-4">
        <%= area_chart Ahoy::Event.where_event("Viewed Privacy Policy").group_by_day(:time).count, download: {background: "#ffffff"}, points: false, colors: ["rgba(0,255,0,0.5)"], title: "Privacy Policy" %>
      </div><!-- .col-lg-3 -->
      <div class="col-lg-3 mt-1 mb-4">
        <%= area_chart Ahoy::Event.where_event("Viewed Cookie Policy").group_by_day(:time).count, download: {background: "#ffffff"}, points: false, colors: ["rgba(0,0,255,0.5)"], title: "Cookie Policy" %>
      </div><!-- .col-lg-3 -->
      <div class="col-lg-3 mt-1 mb-4">
        <%= area_chart Ahoy::Event.where_event("Viewed Sitemap").group_by_day(:time).count, download: {background: "#ffffff"}, points: false, colors: ["rgba(255,255,0,0.5)"], title: "Sitemap" %>
      </div><!-- .col-lg-3 -->
    </div><!-- .row -->
  </section><!-- .mt-0 .mb-5 .pb-5 .text-center -->

<% else # admins, members, and visitors %>

  <section class="jumbotron text-center">
    <div class="container">
      <h1 class="jumbotron-heading">Dashboard</h1>
      <p class="lead text-left text-muted">Hi, <%= link_to truncate(current_user.name), current_user, class: "text-info font-weight-bold" %>, you can use the header links to see the ToDo List, Blog, and WebRTC. View personal analytics below:</p>
    </div><!-- .container -->
  </section><!-- .jumbotron -->
  <section class="mt-0 text-center">
    <div class="row">
      <%= render partial: 'pages/charts' %>
    </div><!-- .row -->
  </section><!-- .mt-0 .text-center -->
  <section class="text-center mt-1 pt-0 mb-5 pb-5">
    <div class="col-12">
      <%= area_chart api_v1_charts_month_of_year_single_articles_path, points: false, colors: ["rgba(0,0,0,0.9)"], title: "My Articles" %>
    </div><!-- .col-12 -->
  </section><!-- .text-center mt-0 -->

<% end %>
