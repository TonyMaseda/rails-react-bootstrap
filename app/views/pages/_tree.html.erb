<script type="text/javascript">
  google.charts.load('current', {packages:['wordtree']});
  google.charts.setOnLoadCallback(drawChart);

  function drawChart() {
    var data = google.visualization.arrayToDataTable(
      [ ['Phrases'],
        <% @articles.each do |article| %>
          ['<%= "#{article.strip_text_for_tree}" %>'],

          ['<%= "#{article.strip_title_for_tree}" %>'],
        <% end %>

        <% @comments.each do |comment| %>
          ['<%= "#{comment.strip_body_for_tree}" %>'],
        <% end %>

        <% @rooms.each do |room| %>
          ['<%= "#{room.strip_name_for_tree}" %>'],
        <% end %>

        <% @todo_items.each do |todo_item| %>
          ['<%= "#{todo_item.strip_title_for_tree}" %>'],
        <% end %>
      ]
    );

    var options = {
      maxFontSize: 30,
      wordtree: {
        format: 'implicit',
        word: document.getElementById("root").value,
        Default: 'suffix', // type: 'double',
      }
    };

    var chart = new google.visualization.WordTree(document.getElementById('wordtree_global'));
    chart.draw(data, options);
  }
</script>

<div class="jumbotron">
  <div class="container">
    <h4 class="jumbotron-heading text-dark font-italic">Word Tree</h4>
    <div class="filter">
      <input id="root" class="form-control" placeholder="Search word(s)" value="" onchange="drawChart()">
    </div><!-- .filter -->
  </div><!-- .container -->
  <div id="wordtree_global" class="w-100 mt-2"></div>
</div><!-- .jumbotron -->
