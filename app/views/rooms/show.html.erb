<section class="jumbotron text-center">
  <div class="container">
    <%= turbo_frame_tag "room" do %>
      <h1 class="jumbotron-heading"><%= truncate(@room.name) %></h1>
      <p class="lead text-muted">
        <%= @room.created %>
        <strong class="d-block"><i class="fas fa-user"></i> <%= link_to truncate(@room.user.name), @room.user, class: "text-info" %></strong>
      </p>
      <% if can? :manage, @room %>
        <p class="mt-0 mb-0">
          <%= link_to edit_room_path(@room), class: 'btn btn-outline-dark' do %>
            <i class='fas fa-signature text-tayberry' title="Edit"></i>
          <% end %>
          <%= link_to room_path(@room), class: 'btn btn-outline-dark', method: :delete, data: { confirm: 'Are you sure you want to delete this room?' } do %>
            <i class='fas fa-trash text-danger mx-1' title="Delete"></i>
          <% end %>
        </p>
      <% end %>
    <% end # turbo_frame_tag "room" %>
  </div><!-- .container -->
</section><!-- .jumbotron -->

<section class="container mb-5 pb-5">
  <div class='row'>
    <div class='col-12 mb-2'>
      <div id='videos'
        data-controller='video-chat'
        data-video-chat-twilio='<%= @room.room_key %>'
        data-video-chat-session="<%= session.id %>"
        data-video-chat-id="<%= @room.id %>">
        <div class="d-inline" data-video-chat-target="remote_videos"></div>
        <video data-video-chat-target="local_video" autoplay></video>
      </div><!-- #videos -->
    </div><!-- .col-12 -->
    <div class="col-lg-7 overflow-auto" id='show-notes'>
      <%= turbo_stream_from @room %>
      <div id='notes'>
        <%= render @room.notes %>
      </div><!-- #notes -->
    </div><!-- .col-lg-7 -->
    <div class="col-lg-5 notes-form">
      <%= turbo_frame_tag 'new_note', src: new_room_note_path(@room), target: :_top %>
    </div><!-- .col-lg-5 -->
  </div><!-- .row -->
</section><!-- .container -->
